<?php echo $this->load->view('header.html'); ?>

<div class="clear_left"></div>

	<div class="pageContents">
		<form method="post" id="shortcuts_form" action="<?php echo $caller->output($base_uri.'&method=shortcuts');?>">
		<input type="hidden" name="XID" value="<?php echo $XID_SECURE_HASH;?>" />
		<input type="hidden" name="shortcut_id" value="<?=$shortcut_id; ?>" />
<?php if ( ! empty( $edit_mode ) AND $edit_mode == 'y') : ?>
		<input type="hidden" name="edit" value="<?=$shortcut_id; ?>" />
<?php endif; ?>
		<table id="entries" class="mainTable padTable" border="0" cellspacing="0" cellpadding="0">
			<thead>
				<tr>
					<th class="tableHeadingAlt" style="width:10%;"><?=ee()->lang->line('shortcut'); ?></th>
					<th class="tableHeadingAlt" style="width:60%;"><?=ee()->lang->line('url'); ?></th>
					<th class="tableHeadingAlt" style="width:30%;" colspan="2"><?=ee()->lang->line('custom_shortcut'); ?></th>
				</tr>
			</thead>
			<tbody>
			<tr>
				<td class="tableCellOne" valign="top">
					<input type="text" name="shortcut" value="<?=$shortcut; ?>" class="input" readonly="readonly" />
				</td>
				<td class="tableCellOne" valign="top">
					<input type="text" name="full_url" value="<?=$full_url; ?>" class="input" />
				</td>
				<td class="tableCellOne" valign="top">
					<input type="text" name="custom_shortcut" value="<?=$custom_shortcut; ?>" class="input" />
				</td>
				<td class="tableCellOne" valign="top">
					<input type="submit" name="submit" class="submit" value="<?=ee()->lang->line('submit'); ?>" />
				</td>
			</tr>
			<!-- Editable -->
			</tbody>
		</table>
		<div class='clearfix' >&nbsp;</div>
		</form>
        
        
        
        

		<table id="entries" class="mainTable padTable" border="0" cellspacing="0" cellpadding="0">
			<thead>
				<tr>
					<th class="tableHeadingAlt" style="width:11%;"><?=ee()->lang->line('shortcut'); ?></th>
					<th class="tableHeadingAlt" style="width:60%;"><?=ee()->lang->line('url'); ?></th>
					<th class="tableHeadingAlt" style="width:7%;"><?=ee()->lang->line('hits'); ?></th>
					<th class="tableHeadingAlt" style="width:12%;"><?=ee()->lang->line('actions'); ?></th>
				</tr>
			</thead>
			<tbody>
			<!-- Editable -->
<?php if ( ! empty( $shortcuts ) ) : ?>
	<?php foreach ( $shortcuts as $shortcut_id => $row ) : ?>
	<?php $switch = $caller->cycle( 'odd', 'even' ); ?>
			<tr class="<?=$switch; ?>">
			<?php if ( $row['autogenerated'] == 'n' ) : ?>
				<td class="<?=$switch; ?>"><a target="_blank" href="<?=$row['custom_shortcut']; ?>"><?=$row['shortcut_name']; ?></a></td>
			<?php else : ?>
				<td class="<?=$switch; ?>"><a target="_blank" href="<?=$row['shortcut']; ?>"><?=$row['shortcut_name']; ?></a></td>
			<?php endif; ?>
				<td class="<?=$switch; ?>"><a target="_blank" alt="<?=$row['full_url']; ?>" title="<?=$row['full_url']; ?>" href="<?=$row['full_url']; ?>"><?=$row['truncated_url']; ?></a></td>
				<td class="<?=$switch; ?>"><?=$row['hits']; ?></td>
				<td class="<?=$switch; ?>"><a href="<?=$base_uri . '&method=shortcuts&edit=' . $row['shortcut_id'] . '&msg=' . $row['msg']; ?>"><?=ee()->lang->line('edit'); ?></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="delete" alt="<?=$row['shortcut']; ?>" href="<?=$base_uri . '&method=shortcuts&delete=' . $row['shortcut_id']; ?>"><?=ee()->lang->line('delete'); ?></a></td>
			</tr>
	<?php endforeach; ?>
<?php endif; ?>
<?php if ( ! empty( $pagination ) ) : ?>
			<tr class="<?php echo $caller->cycle( 'odd', 'even' ); ?>" >
				<td class="tableCellOne" style="text-align:right;" colspan="4">
					<?=$pagination; ?>
				</td>
				<td class="tableCellOne">&nbsp;</td>
			</tr>
<?php endif; ?>
			</tbody>
		</table>
		<div class='clearfix' >&nbsp;</div>
        
        

	</div>		
		
		<script type="text/javascript"> 
		<!--
		jQuery(document).ready(function()
		{		
			jQuery('form#shortcuts_form a.delete').click( function(event) {
				var conf	= confirm( "<?=ee()->lang->line('confirm_delete'); ?>" + jQuery(this).attr('alt') + "?" );
				if ( ! conf )
				{
					return false;
				}
			});
		})
		-->
		</script>
	
<?php echo $this->load->view('footer.html'); ?>